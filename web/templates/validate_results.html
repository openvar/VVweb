{% if output.flag == 'warning' %}
  <div class="row">
    <div class="col-md-12 mb-5">
      <h1>Error</h1>
      <p>Unable to validate the submitted variant <code>{{ output.inputted }}</code> against the {{ output.genome }} assembly. The following warnings were returned:</p>
      <ul>
      {% for warning in output.warnings %}
        <li class="text-danger">{{ warning }}</li>
      {% endfor %}
      </ul>
      <p>
        Please check your submission and re-submit.
        {% if 'does not agree with reference sequence' in output.warnings.0 %}
          Based on the error above you likely selected the wrong assembly.
        {% endif %}
      </p>
    </div>
  </div>
{% else %}
  {% if output.results|length > 1 %}
      <div class="row">
          <div class="col-md-12 mb-5">
              <p>VariantValidator returned multiple results, select those you are interested in from the table below</p>
              <table class="table table-bordered text-center">
                  <tr>
                      <th>Select</th>
                      <th>Transcript Accession</th>
                      <th>Gene Accession</th>
                      <th>Latest Version</th>
                  </tr>
                  {% for each in output.results %}
                      <tr>
                          <td>
                              <div class="custom-control custom-checkbox">
                                  <input type="checkbox" class="custom-control-input res-checkbox" data-tabid="{{ each.id }}" id="{{ each.id }}-checkbox">
                                  <label class="custom-control-label" for="{{ each.id }}-checkbox"></label>
                              </div>
                          </td>
                          <td>{{ each.tx_ac }}</td>
                          <td>{{ each.gene_ac }}</td>
                          <td class="text-center">
                              {% if each.latest %}
                                  <span><i class="fas fa-check text-success"></i></span>
                              {% else %}
                                  <span><i class="fas fa-times text-danger"></i></span>
                              {% endif %}
                          </td>
                      </tr>
                  {% endfor %}
              </table>
          </div>
      </div>
  {% endif %}
  <div id="results">
      <div class="row">
          <div class="col-md-12 mb-2">
              <ul class="nav nav-tabs" id="myTab" role="tablist">
                  {% for each in output.results %}
                      <li class="nav-item">
                          <a class="nav-link" id="{{ each.id }}-tab" data-toggle="tab" href="#{{ each.id }}" role="tab" aria-controls="{{ each.id }}" aria-selected="false">{{ each.safe_hgvs_trans }}</a>
                      </li>
                  {% endfor %}
              </ul>
              <div class="tab-content" id="myTabContent">
                  {% for each in output.results %}
                      <div class="tab-pane" id="{{ each.id }}" role="tabpanel" aria-labelledby="{{ each.id }}-tab">
                          <h3 class="mt-3">{{ each.safe_hgvs_trans }}</h3>
                          <h4>{{ each.transcript_description }}</h4>
                          <h6>{{ output.genome }}: {{ each.chr_loc }}</h6>
                          <br>
                          <h5>HGVS-compliant variant descriptions</h5>
                          <table class="table table-bordered">
                              <tr>
                                  <th>Type</th>
                                  <th>Variant Description</th>
                                  <th>Link to GenBank</th>
                              </tr>
                              <tr>
                                  <td>Transcript (:c.)</td>
                                  <td><a class="variant-example" data-genome="{{ output.genome }}" href="#">{{ each.hgvs_transcript_variant }}</a></td>
                                  <td><a href="https://www.ncbi.nlm.nih.gov/nuccore/{{ each.tx_ac }}" target="_blank">{{ each.tx_ac }}</a></td>
                              </tr>
                              <tr>
                                  <td>RefSeq Gene (:g.)</td>
                                  <td><a class="variant-example" data-genome="{{ output.genome }}" href="#">{{ each.hgvs_refseqgene_variant }}</a></td>
                                  <td><a href="https://www.ncbi.nlm.nih.gov/nuccore/{{ each.gene_ac }}" target="_blank">{{ each.gene_ac }}</a></td>
                              </tr>
                              <tr>
                                  <td>Protein (:p.)</td>
                                  <td><a class="variant-example" data-genome="{{ output.genome }}" href="#">{{ each.hgvs_predicted_protein_consequence.tlr }}</a></td>
                                  <td><a href="https://www.ncbi.nlm.nih.gov/nuccore/{{ each.prot_ac }}" target="_blank">{{ each.prot_ac }}</a></td>
                              </tr>
                          </table>

                          <h5>Genomic Variants</h5>
                          <table class="table table-bordered">
                              <tr>
                                  <th>Variant Description</th>
                                  <th>VCF Description</th>
                                  <th>Link to GenBank</th>
                              </tr>
                              <tr>
                                  <td><a class="variant-example" data-genome="GRCh38" href="#">{{ each.primary_assembly_loci.grch38.hgvs_genomic_description }}</a></td>
                                  <td>{{ each.primary_assembly_loci.grch38.vcfstr }}</td>
                                  <td><a href="https://www.ncbi.nlm.nih.gov/nuccore/{{ each.primary_assembly_loci.grch38.ac }}" target="_blank">{{ each.primary_assembly_loci.grch38.ac }}</a></td>
                              </tr>
                              <tr>
                                  <td><a class="variant-example" data-genome="GRCh37" href="#">{{ each.primary_assembly_loci.grch37.hgvs_genomic_description }}</a></td>
                                  <td>{{ each.primary_assembly_loci.grch37.vcfstr }}</td>
                                  <td><a href="https://www.ncbi.nlm.nih.gov/nuccore/{{ each.primary_assembly_loci.grch37.ac }}" target="_blank">{{ each.primary_assembly_loci.grch37.ac }}</a></td>
                              </tr>
                          </table>

                          {% if each.validation_warnings %}
                          <h5>Warnings output during validation</h5>
                            <ul>
                            {% for warning in each.validation_warnings %}
                              <li class="text-danger">{{ warning }}</li>
                            {% endfor %}
                            </ul>
                          {% endif %}

                          <h4>Recommended Variant Descriptions</h4>
                          <ol>
                              <li>We recommend using a genomic and a transcript description in all publications</li>
                              <li>We currently recommend that RefSeqGene descriptions should be used when possible</li>
                          </ol>
                          <h5>Genomic descriptions</h5>
                          <table class="table table-bordered">
                              <tr>
                                  <th>Reference Sequence Type</th>
                                  <th>Variant Description</th>
                              </tr>
                              <tr>
                                  <td>RefSeqGene</td>
                                  <td>{{ each.hgvs_refseqgene_variant }}</td>
                              </tr>
                              <tr>
                                  <td>Chromosomal GRCh37</td>
                                  <td>{{ each.primary_assembly_loci.grch37.hgvs_genomic_description }}</td>
                              </tr>
                          </table>
                          <h5>Transcript descriptions</h5>
                          <table class="table table-bordered">
                              <tr>
                                  <th>Reference Sequence Type</th>
                                  <th>Variant Description</th>
                              </tr>
                              <tr>
                                  <td>RefSeq Transcript</td>
                                  <td>{{ each.hgvs_transcript_variant }}</td>
                              </tr>
                          </table>
                      </div>
                  {% endfor %}
              </div>
          </div>
      </div>
      <div class="row">
          <div class="col-md-12 mb-5">
              <h4>Aggregated data sources and clinical significance</h4>
          </div>
      </div>
  </div>
{% endif %}
<hr>
