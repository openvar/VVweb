{% extends 'base.html' %}

{% block title %} - Genes to Transcripts{% endblock %}
{% block header_title %}Genes to Transcripts{% endblock %}

{% block content %}
  <div class="loading spinner-border text-primary" role="status">
      <span class="sr-only">Loading...</span>
  </div>
  {% if output %}
      <div class="row">
          <div class="col-md-12 mb-3">
              {% if output.error %}
                  <h3 class="text-danger">{{ output.error }}</h3>
              {% else %}
                  <h2>{{ output.current_symbol }} ({{ output.current_name }})</h2>
                  <br>
                  <h4>Transcript Sequences</h4>
                  <table class="table table-bordered">
                      <tr>
                          <th>Reference ID</th>
                          <th>Coding Start</th>
                          <th>Coding End</th>
                          <th>Description</th>
                          <th>MANE Select</th>
                          <th>MANE PLus Clinical</th>
                          <th>RefSeq Select</th>
                      </tr>
                      {% for trans in output.transcripts %}
                          <tr>
                              <td><a href="{{ trans.url }}" target="_blank">{{ trans.reference }}</a></td>
                              <td>{{ trans.coding_start }}</td>
                              <td>{{ trans.coding_end }}</td>
                              <td>{{ trans.description }}</td>
                          <td class="text-center">
                              {% if trans.annotations.mane_select %}
                                  <span><i class="fas fa-check text-success"></i></span>
                              {% else %}
                                  <span><i class="fas fa-times text-danger"></i></span>
                              {% endif %}
                          </td>
                          <td class="text-center">
                              {% if trans.annotations.mane_plus_clinical %}
                                  <span><i class="fas fa-check text-success"></i></span>
                              {% else %}
                                  <span><i class="fas fa-times text-danger"></i></span>
                              {% endif %}
                          </td>
                          <td class="text-center">
                              {% if trans.annotations.refseq_select %}
                                  <span><i class="fas fa-check text-success"></i></span>
                              {% else %}
                                  <span><i class="fas fa-times text-danger"></i></span>
                              {% endif %}
                          </td>
                          </tr>
                      {% endfor %}
                  </table>
              {% endif %}
          </div>
      </div>
      <hr>
  {% endif %}
  <div class="row">
      <div class="col-md-12 mb-5">
          <h2>Input HGNC gene symbols or valid transcript accessions</h2>
          <form method="post">
              {% csrf_token %}
              <div class="form-group">
                  <input id="symbol_id" name="symbol" type="text" class="form-control" placeholder="e.g. COL1A1 (or NM_000088.3)" required>
              </div>
              <button class="btn btn-primary" id="g2t-btn" type="submit">Submit</button>
          </form>
      </div>
  </div>

{% endblock %}

